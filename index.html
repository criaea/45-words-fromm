
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JUNG TYPOLOGY</title>
    
    <!-- React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- D3.js -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    
    <!-- Google Translate -->
    <script type="text/javascript">
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'en',
                includedLanguages: 'en,it,es,fr,pl,de,ga',
                layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
                autoDisplay: false
            }, 'google_translate_element');
        }
    </script>
    <script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel&family=Comfortaa&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- Basic Styles --- */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        /* --- Animations --- */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes modalFadeIn {
            from { 
                opacity: 0; 
                transform: translateY(-20px) scale(0.95);
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1);
            }
        }
        
        body {
            background-color: #f0f4f9; 
            color: #333;
            line-height: 1.6;
            font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            width: 100%;
            margin: 20px auto; 
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            padding: 40px;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(90deg, #6a11cb, #2575fc);
        }

        .question-container {
            margin-bottom: 25px;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            opacity: 1;
            transform: translateY(0);
            transition: opacity 0.2s ease-in-out, transform 0.2s ease-in-out;
        }

        .question-container.transitioning {
            opacity: 0;
            transform: translateY(-10px); /* Fades out by moving up */
        }

        .question-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 15px;
            box-shadow: 0 4px 12px rgba(37, 117, 252, 0.3);
            flex-shrink: 0;
        }
        
        .question-text {
            font-weight: 600;
            margin-bottom: 25px;
            color: #2c3e50;
            font-size: 1.25rem;
            text-align: center;
            line-height: 1.5;
        }
        
        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            width: 100%;
        }
        
        .option {
            display: flex;
            align-items: center;
            justify-content: center; /* Center text */
            text-align: center; /* Center text */
            padding: 20px;
            border: 2px solid #e0e6ed;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            background-color: rgba(248, 249, 250, 0.8);
            min-height: 80px; /* Ensure options have same height */
        }
        
        .option:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
            border-color: #a0b4c8;
        }
        
        .option.selected {
            background-color: #e3f2fd;
            border-color: #2575fc;
            box-shadow: 0 8px 25px rgba(37, 117, 252, 0.2);
            transform: translateY(-4px);
            color: #2575fc; /* Change text color when selected */
            font-weight: 600; /* Make text bold when selected */
        }
        
        .option input {
            display: none; /* Hide the radio button */
        }
        
        /* --- Navigation Styles --- */
        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
        }
        
        button {
            padding: 12px 28px;
            background: linear-gradient(145deg, #5a29e4, #3a68d8);
            color: #fff;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out, background 0.3s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 
                        inset 0 1px 1px rgba(255, 255, 255, 0.2);
            text-shadow: 0 -1px 0 rgba(0,0,0,0.2);
            white-space: nowrap;
        }
        
        button:hover {
            background: linear-gradient(145deg, #6b3ef0, #4c7ce0);
            transform: translateY(-3px);
            box-shadow: 0 7px 14px rgba(50, 50, 93, 0.1), 
                        0 3px 6px rgba(0, 0, 0, 0.08),
                        inset 0 1px 1px rgba(255, 255, 255, 0.2);
        }

        button:active {
            transform: translateY(1px);
             box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1), 
                        inset 0 2px 3px rgba(0, 0, 0, 0.2);
        }
        
        button:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
            color: #7f8c8d;
            text-shadow: none;
        }

        /* --- Cover Page Styles --- */
        #coverPage {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center; /* Center vertically */
            text-align: center;
            padding: 20px 0; /* Add some vertical padding */
        }

        /* --- Feature List Styles --- */
        .features-list {
            display: flex;
            flex-direction: column;
            gap: 25px; /* Increased gap */
            margin: 30px 0;
            width: 100%;
            max-width: 600px; /* Increased max-width */
            align-items: flex-start; /* Align items to the left of the container */
        }

        .feature-item {
            display: flex;
            align-items: flex-start; /* Align icon to the top */
            gap: 20px;
        }

        .feature-icon {
            width: 100px; /* Standardized size */
            height: auto; /* Maintain aspect ratio */
            border-radius: 0; 
            object-fit: contain; 
            background-color: transparent; 
            box-shadow: none; 
            flex-shrink: 0;
            margin-top: 4px; /* Align icon with first line of text */
        }

        .feature-text-content {
            text-align: left;
            display: flex;
            flex-direction: column;
            gap: 4px; /* Small gap between title and description */
        }

        .feature-title {
            font-size: 1.1rem;
            color: #2c3e50;
            font-weight: 600; /* Bolder */
        }
        
        .feature-description {
            font-size: 0.95rem; /* Slightly smaller */
            color: #34495e; 
            font-weight: 400; /* Regular weight */
            line-height: 1.5;
        }

        #coverTitle.cover-title {
            font-family: 'Cinzel', serif;
            font-size: 2.5rem;
            font-weight: 400;
            margin-bottom: 10px; /* MODIFIED: Was 30px */
            letter-spacing: 1px;
            color: #2c3e50;
        }

        /* --- MODIFIED: Style for the cover page description --- */
        .cover-description {
            font-size: 1.05rem;
            color: #34495e;
            max-width: 650px;
            margin: 0 auto 10px auto; /* MODIFIED: Was -10px auto 10px auto */
            line-height: 1.7;
            text-align: center; /* Ensure it's centered */
        }
        
        /* --- NEW: Style for the sub-description --- */
        .cover-description-sub {
            font-size: 1.05rem;
            color: #34495e;
            max-width: 650px;
            margin: 0 auto 30px auto; /* Top margin 0, bottom margin 30px */
            line-height: 1.7;
            text-align: center; /* Ensure it's centered */
        }
        /* --- END NEW --- */

        /* --- NEW: Style for the copyright subtitle --- */
        .cover-copyright {
            font-size: 0.8rem;
            color: #555;
            text-align: center;
            margin-top: 0; /* MODIFIED: Was -20px */
            margin-bottom: 30px;
        }
        
        .cover-copyright b {
            font-weight: 600;
            color: #333;
        }
        /* --- END NEW --- */

        /* --- NEW: Style for the bottom-right copyright --- */
        .ourfields-copyright-bottom {
            font-size: 0.8rem;  /* Same size as .cover-copyright */
            color: #555;      /* Same color as .cover-copyright */
            width: 100%;      /* Take full width of the flex container */
            max-width: 650px; /* Match the max-width of description text to align */
            text-align: right;  /* Align text to the right */
            margin-top: 30px;   /* Space from the button */
        }
        /* --- END NEW --- */

        /* --- NEW: Footer for quiz and results pages --- */
        .page-footer {
            font-size: 0.8rem;  /* Same size as .ourfields-copyright-bottom */
            color: #555;      /* Same color as .ourfields-copyright-bottom */
            text-align: center; /* Centered */
            width: 100%;
            padding-top: 20px; /* Space from content above */
            margin-top: 30px;
            border-top: 1px solid #e0e6ed; /* Subtle separator line */
        }

        .page-footer b {
            font-weight: 600;
            color: #333;
        }
        /* --- END NEW --- */

        #startBtn {
            font-family: 'Poppins', sans-serif;
            font-size: 1.2rem;
            font-weight: 600;
            padding: 15px 40px;
            border-radius: 50px; 
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%); 
            border: none;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(37, 117, 252, 0.3);
            margin-top: 30px;
        }
        
        #startBtn:hover {
            transform: translateY(-3px) scale(1.05); 
            box-shadow: 0 8px 25px rgba(37, 117, 252, 0.4);
        }


        /* --- Results Page Styles --- */
        #resultsPage {
            display: block; /* Managed by React */
            animation: fadeIn 0.5s ease-in-out;
        }

        .chart-container {
            position: relative;
            height: 400px;
            width: 100%;
            max-width: 600px; /* Constrain chart width */
            margin: 0 auto;
        }
        
        /* --- MODIFIED: D3 Chart Container Size --- */
        #converse-chart-container {
            max-width: 800px; /* Make it wider than the first chart (600px) */
            height: auto;     /* Let the viewBox aspect ratio (960/500) determine the height */
            margin-top: 0 !important; /* Ensure inline style is respected */
        }
        /* --- END MODIFIED --- */

        /* --- NEW: D3.js Axis Styles --- */
        .axis path,
        .axis line {
            fill: none;
            stroke: #9ca3af; /* gray-400 */
            shape-rendering: crispEdges;
        }
        .axis text {
            fill: #6b7280; /* gray-500 */
            font-size: 0.875rem; /* text-sm */
            font-family: 'Poppins', sans-serif;
        }
        /* Style for the D3 grid lines */
        .grid .tick line {
            shape-rendering: crispEdges;
        }
        /* --- END NEW --- */

        .personality-type-display {
            font-size: 3.5rem; 
            font-weight: 700; 
            color: #2c3e50; 
            text-align: center; 
            margin-top: 25px; 
            letter-spacing: 2px; 
        }

        .personality-words-display {
            font-size: 1.25rem;
            color: #2c3e50; 
            text-align: center;
            letter-spacing: 1px;
            font-weight: 600; 
            padding: 18px 25px; 
            border-bottom: 1px solid #e0e6ed; 
        }
        
        .personality-words-display strong {
             color: #2575fc; /* Use main accent blue */
             font-size: 1.1em; /* Make it slightly larger */
             font-weight: 700; /* Ensure it's bold */
        }
        
        /* --- NEW: Style for the (J) suffix --- */
        .suffix {
            font-size: 0.5em; /* Make it 50% of the parent font size */
            font-weight: 400; /* Lighter weight */
            color: #555; /* Slightly muted color */
            margin-left: 1px; /* Tiny bit of space */
        }
        /* --- END NEW --- */

        .restart-button-container {
            display: flex;
            justify-content: center;
            margin-top: 30px;
        }

        .opposite-type-header {
            text-align: center;
            font-size: 1.5rem;
            color: #34495e; 
            font-weight: 600;
            margin-bottom: 20px;
            /* --- MODIFIED: Increased top margin again --- */
            margin-top: 50px; /* Was 30px */
            /* --- NEW: Ensure space below for printing --- */
            margin-bottom: 30px;
        }
        
        /* --- NEW: Apply suffix styling to this header too --- */
        #oppositeTypeHeader .suffix {
             font-size: 0.5em; /* Make it 50% */
             font-weight: 400;
             color: #555;
        }

        .toggle-other-container {
            display: flex;
            justify-content: center;
            margin-top: 25px;
            margin-bottom: 25px;
        }

        /* --- MODIFIED: Restored neon glow style to the button --- */
        .other-toggle-btn {
            font-family: 'Poppins', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            padding: 12px 30px;
            border-radius: 50px;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            border: 2px solid #a881ef; /* Restored solid border */
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            /* Restored Glow Shadow */
            box-shadow: 0 0 10px #a881ef, 0 0 20px #a881ef, inset 0 0 5px rgba(255, 255, 255, 0.2);
            text-shadow: 0 0 3px rgba(255, 255, 255, 0.4);
        }
        
        .other-toggle-btn:hover {
            transform: translateY(-2px) scale(1.03);
            /* Restored Hover Glow */
            box-shadow: 0 0 15px #a881ef, 0 0 30px #a881ef, inset 0 0 5px rgba(255, 255, 255, 0.3);
        }
        /* === END MODIFICATION === */

        /* --- Letter Definition Grid Styles --- */
        .letter-definitions-grid {
            display: grid;
            grid-template-columns: 1fr; 
            gap: 20px;
            margin: 30px 0;
            /* display: none; */ /* Managed by React */
        }

        .letter-card {
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            border-top: 5px solid #ccc; /* Default border, color set by JS */
            transition: all 0.3s ease;
            overflow: hidden; 
        }

        .letter-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.08);
        }

        .letter-card-title {
            font-weight: 700;
            font-size: 1.25rem;
            color: #2c3e50;
            margin-bottom: 0; 
            padding: 20px; 
            padding-right: 50px; /* for icon */
            cursor: pointer; 
            position: relative; 
            list-style: none; 
        }
        
        .letter-card-title::-webkit-details-marker {
            display: none;
        }

        /* Custom arrow for letter card */
        .letter-card-title::after {
            content: '+';
            font-family: 'Poppins', sans-serif;
            font-size: 1.5rem; 
            font-weight: 300;
            color: #2575fc;
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            transition: transform 0.2s ease;
        }

        .letter-card[open] > .letter-card-title::after {
            content: '−';
            transform: translateY(-50%) rotate(180deg);
        }

        .letter-card-desc {
            font-size: 0.95rem;
            line-height: 1.6;
            color: #34495e;
            padding: 0 20px 20px 20px; 
        }

        /* --- Result Details Section Styles (Container) --- */
        .results-details {
            margin-top: 40px;
            padding: 30px;
            /* border-top: 1px solid #d1d5db; */ /* Line removed */
            background-color: #f8f9fa; /* Light gray background */
            border-radius: 10px;
            border: 1px solid #e0e6ed;
            box-shadow: 0 4px 15px rgba(0,0,0,0.02);
        }

        .result-section-static {
            margin-bottom: 15px; 
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            border: 1px solid #e0e6ed;
            overflow: hidden; 
        }

        .result-section-content {
            font-size: 1.05rem;
            line-height: 1.7;
            color: #34495e;
            padding: 25px; 
        }

        /* Style for the main overview paragraph */
        #desc-overview {
            font-style: italic;
            font-size: 1.1rem;
            color: #2c3e50;
        }

        /* --- NEW: Profile Grid Styles --- */
        .profile-grid-container {
            margin-top: 40px;
            padding-top: 30px;
            border-top: 1px solid #e0e6ed;
        }
        
        /* --- MODIFIED: Adjust profile grid container inside results-details --- */
        .results-details .profile-grid-container {
             margin-top: 10px; /* Reduced top margin */
             padding-top: 0; /* No top padding */
             border-top: none; /* No top border */
        }

        .profile-grid-title {
            text-align: center;
            font-size: 1.5rem;
            color: #34495e; 
            font-weight: 600;
            margin-bottom: 25px;
        }

        .profile-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            border: 1px solid #ccc;
            border-radius: 8px;
            /* overflow: hidden; */ /* --- FIX: Removed to prevent highlight clipping --- */
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            background-color: #fff; /* Ensure white background for cells */
        }

        .profile-cell {
            padding: 15px 10px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease, border 0.2s ease; /* Added border */
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-right: 1px solid #ddd;
            border-bottom: 1px solid #ddd;
        }
        
        /* Remove extra borders */
        .profile-cell:nth-child(4n) {
            border-right: none;
        }
        .profile-cell:nth-child(n+13) { /* Last row */
            border-bottom: none;
        }

        .profile-cell:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            z-index: 10;
        }

        /* --- MODIFIED: New Highlight Style --- */
        .profile-cell.highlight {
            /* Use a distinct background color for the new highlight */
            background-color: #e3f2fd; /* Light blue (from quiz option selected) */
            border: 2px solid #2575fc;
            /* Remove old transform and shadow */
            transform: none; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.1); /* Keep a subtle shadow */
            z-index: 11; 
        }
        
        /* Ensure text is readable on new highlight */
        .profile-cell.highlight .profile-cell-type,
        .profile-cell.highlight .profile-cell-title {
            color: #2c3e50; 
        }

        /* Prevent hover effect on the already-highlighted cell */
        .profile-cell.highlight:hover {
             transform: none;
             box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        /* --- END MODIFIED --- */

        .profile-cell-type {
            font-size: 1.5rem;
            font-weight: 700;
            font-family: 'Cinzel', serif;
            margin-bottom: 8px;
        }
        
        .profile-cell-title {
            font-size: 0.8rem;
            font-weight: 500;
            line-height: 1.3;
        }

        /* Colors based on user image */
        .cell-color-a {
            background-color: #f7ead0; /* Lighter tan/orange */
            color: #2c3e50;
        }
        .cell-color-b {
            background-color: #2c3e50; /* Dark blue/grey */
            color: #f7ead0;
        }
        /* --- END NEW: Profile Grid Styles --- */


        /* --- NEW: Modal Styles --- */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
            animation: fadeIn 0.3s ease;
        }
        
        .modal-content {
            background: #fff;
            padding: 30px;
            border-radius: 10px;
            max-width: 550px;
            width: 100%;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            position: relative;
            animation: modalFadeIn 0.3s ease-out;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal-close {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 2.5rem;
            line-height: 1;
            color: #aaa;
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0; /* Reset button padding */
            box-shadow: none; /* Reset button shadow */
            font-weight: 300;
        }
        .modal-close:hover {
            color: #333;
            transform: none; /* Reset button hover */
            box-shadow: none;
        }

        .modal-profile-title {
            font-family: 'Cinzel', serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: #2c3e50;
            text-align: center;
            margin-bottom: 5px;
        }

        .modal-profile-subtitle {
            font-size: 1.1rem;
            font-weight: 500;
            color: #555;
            text-align: center;
            margin-bottom: 20px;
            border-bottom: 1px solid #e0e6ed;
            padding-bottom: 15px;
        }

        .modal-profile-description {
            font-size: 1.05rem;
            line-height: 1.7;
            color: #34495e;
            font-style: italic;
        }
        
        /* --- NEW: Style for chart interactive elements --- */
        .chart-interactive-bubble {
            cursor: pointer;
            transition: r 0.2s ease, stroke-width 0.2s ease;
            filter: drop-shadow(0 2px 3px rgba(0,0,0,0.2));
        }
        .chart-interactive-bubble:hover {
            r: 8; /* Grow slightly on hover */
            stroke-width: 3;
        }
        .chart-bar-rect {
            cursor: pointer; /* Make the whole bar clickable too */
            transition: opacity 0.2s;
        }
        .chart-bar-rect:hover {
            opacity: 0.85;
        }
        
        /* --- MODIFIED: New Styles for Info Bubbles --- */
        .chart-bubble-group {
            cursor: pointer;
        }
        .chart-bubble-group circle {
            transition: all 0.2s ease;
            fill: #fff;
            filter: drop-shadow(0 2px 2px rgba(0,0,0,0.15)); /* Button-like shadow */
        }
        .chart-bubble-group text {
            font-family: 'Poppins', sans-serif;
            /* === MODIFICATION: Increased font size to 18px === */
            font-size: 18px; 
            /* === END MODIFICATION === */
            font-weight: 700;
            fill: #555; /* Dark grey text */
            pointer-events: none; /* Let clicks pass through text to the group */
            text-anchor: middle;
            dominant-baseline: central;
            transition: fill 0.2s ease;
        }
        .chart-bubble-group:hover circle {
            transform: scale(1.1); /* Slight pulse on hover */
            stroke-width: 3;
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.2)); /* Deeper shadow on hover */
        }
        .chart-bubble-group:hover text {
            fill: #000; /* Darker text on hover */
        }
        /* --- END MODIFIED --- */

        /* === NEW: Google Translate Widget Styles === */
        #google_translate_element {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10000; /* Ensure it stays on top of everything */
        }
        
        /* Hide the large Google Translate top bar that pushes content down */
        .goog-te-banner-frame.skiptranslate {
            display: none !important;
        } 
        body {
            top: 0px !important; 
        }

        /* Customizing the button look to match your UI */
        .goog-te-gadget-simple {
            background-color: rgba(255, 255, 255, 0.95) !important;
            border: 1px solid #e0e6ed !important;
            padding: 8px 15px !important;
            border-radius: 50px !important;
            font-family: 'Poppins', sans-serif !important;
            font-size: 0.9rem !important;
            color: #333 !important;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05) !important;
            display: flex !important;
            align-items: center;
            transition: all 0.2s ease;
        }
        
        .goog-te-gadget-simple:hover {
             transform: translateY(-2px);
             box-shadow: 0 6px 15px rgba(0,0,0,0.1) !important;
             border-color: #2575fc !important;
        }

        .goog-te-gadget-icon {
            display: none !important; /* Hide default Google Icon */
        }
        
        .goog-te-menu-value {
            margin: 0 !important;
        }
        
        .goog-te-menu-value span {
            color: #2c3e50 !important;
            font-weight: 600 !important;
            border-left: none !important;
        }
        
        /* Hide the arrow text if redundant or ugly */
        .goog-te-menu-value span:nth-child(3),
        .goog-te-menu-value span:nth-child(5) {
             display: none !important;
        }

        /* Mobile positioning */
        @media (max-width: 768px) {
            #google_translate_element {
                top: 10px;
                right: 10px;
            }
            .goog-te-gadget-simple {
                padding: 5px 10px !important;
                font-size: 0.8rem !important;
            }
        }
        
        /* Hide translate button on print */
        @media print {
            #google_translate_element {
                display: none !important;
            }
        }

        /* === MODIFICATION: Robust Fix for Language Dropdown Height === */
        /* Target the specific Google Translate iframe class */
        .goog-te-menu-frame {
            /* Force fixed positioning relative to the viewport */
            position: fixed !important;
            top: 70px !important; /* Start just below the translate button */
            right: 20px !important;
            
            /* Max height is screen height minus top spacing and a bottom margin */
            max-height: calc(100vh - 90px) !important;
            
            /* Force vertical scrollbar to always accept scrolling */
            overflow-y: scroll !important;
            
            /* Styling */
            box-shadow: 0 10px 30px rgba(0,0,0,0.2) !important;
            border-radius: 12px !important;
            z-index: 10000002 !important; /* Ultra high z-index */
            background-color: #fff !important; /* Ensure background is white */
        }
        /* === END MODIFICATION === */

        
        /* --- Mobile Optimizations --- */
        @media (max-width: 768px) {
            body { 
                padding: 0; 
                display: block; /* Allow natural flow on mobile */
            }
            .container {
                border-radius: 0;
                padding: 20px;
                min-height: 100vh;
                width: 100%;
                margin: 0; /* Full width on mobile */
            }
            .navigation { 
                flex-direction: column; 
                gap: 15px; 
            }
            
            .navigation button {
                width: 100%; /* Make buttons full width */
            }
            
            .options-container {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .features-list {
                align-items: center; /* Center list container on mobile */
                max-width: 100%;
                padding: 0 10px;
            }
            
            .feature-item {
                gap: 15px;
                width: 100%; /* Make items take full width */
                max-width: 350px; /* But not too wide */
                align-items: center; /* Center icon and text block vertically */
            }
            
            .feature-icon {
                width: 80px; /* Adjusted mobile size */
                height: auto; /* Maintain aspect ratio */
                margin-top: 0; /* Reset margin */
            }
            
            .feature-title {
                font-size: 1rem; 
            }
            
            .feature-description {
                font-size: 0.9rem;
            }
            
            #coverTitle.cover-title {
                font-size: 2rem;
            }
            #startBtn {
                padding: 12px 30px;
                font-size: 1rem;
            }
            
            /* --- MODIFIED: Adjust section padding for mobile --- */
            .results-details {
                padding: 20px;
            }

            /* --- MODIFIED: Mobile Profile Grid --- */
            .profile-grid-container {
                overflow-x: auto; /* Enable horizontal scrolling */
                -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
                page-break-inside: avoid;
            }
            .profile-grid {
                /* Force the grid to be wide, preventing wrapping */
                min-width: 600px; 
            }
            /* --- END MODIFIED --- */
        }
        
        /* --- Print Styles --- */
        @media print {
            #coverPage, 
            #settingsPage, /* --- NEW: Hide settings page on print --- */
            #quizSection, 
            .toggle-other-container, 
            .restart-button-container, 
            .modal-overlay,
            .container::before,
            .other-toggle-btn,
            #printBtn,
            .ourfields-copyright-bottom, 
            .page-footer,
            .selection-area 
            { 
                display: none !important;
            }

            body {
                background-color: #fff;
                font-size: 10pt; /* Smaller font for print */
            }

            .container {
                width: 100% !important;
                margin: 0 !important;
                padding: 0 !important;
                box-shadow: none !important;
                border: none !important;
                overflow: visible !important;
            }
            
            /* --- NEW: Simplify results-details for print --- */
            .results-details {
                background-color: #fff !important;
                border: none !important;
                box-shadow: none !important;
                padding: 0 !important;
                margin-top: 30px !important;
            }

            #resultsPage {
                display: block !important;
            }

            /* --- Request 1: Page Break Control --- */
            h1, h3, .result-section-title, .letter-card-title, .profile-grid-title {
                page-break-after: avoid;
            }

            .result-section, 
            .letter-card, 
            .profile-grid-container, 
            .result-section-static, 
            .chart-container,
            .profile-grid,
            .results-details { /* --- NEW --- */
                page-break-inside: avoid;
            }

            /* --- Request 2: First Page Content --- */
            #print-page-1 {
                page-break-after: always;
            }
            
            /* Force open all accordions and show all content for printing */
            details {
                open: true !important;
                page-break-inside: avoid;
            }
            
            .letter-card-title::after, 
            .result-section-title::after {
                display: none !important; /* Hide the '+'/'−' icons */
            }

            #letter-grid,
            #other-letter-grid,
            #oppositeTypeHeader,
            #oppositeDesc,
            #personal-discover-section,
            .profile-grid-container {
                display: block !important; /* Ensure these are visible */
            }

            /* --- NEW: Ensure converse chart is visible for printing --- */
            #converse-chart-container {
                display: block !important;
            }
            /* --- END NEW --- */
            
            .chart-container {
                /* Ensure chart is sized well for print */
                height: 350px !important; 
                max-width: 100% !important;
            }
            
            .profile-grid {
                 /* Simplify grid for print if needed, but 'avoid' should be enough */
                 grid-template-columns: repeat(4, 1fr);
            }
        }
        /* --- End Print Styles --- */
    </style>
</head>
<body>
    <div id="google_translate_element"></div>
    <div id="root"></div>

    <script type="text/babel">
        // Import React hooks from global React object
        const { useState, useEffect, useRef } = React;

        // --- DATA CONSTANTS ---

        const letterDescriptions = {
            'I': "The Introvert risks the Hoarding Orientation. They tend to resolve the \"problem of human existence\" (separateness) by withdrawing. They build a wall around themselves and their \"property\" (feelings, thoughts, time). \"Mine\" is the key word. They view intimacy as an invasion. However, Fromm notes that the capacity to be alone is the condition for the capacity to love. If the introvert can move from \"Hoarding\" to \"Productivity,\" their withdrawal becomes a deep well of creativity and conscience. They become the ones who can resist the mass hypnosis of society because they do not require its constant validation to exist.",
            'E': "The Extrovert is susceptible to the Marketing Orientation. In modern society, we are all salespeople, and our product is ourselves. The Extrovert naturally excels here, but at a terrible cost: the loss of the self. They become \"The Automaton.\" They feel as they are expected to feel; they think what is \"reasonable\" to think. They are terrified of silence because in silence, the \"nothingness\" of their identity is revealed. The path to health is to stop \"relating\" as a transaction and start \"relating\" as a human being—sharing from the center of their existence, not the surface of their personality.",
            'S': "Fromm critiques the \"Consumer Man\"—the eternal suckling who wants to drink in the whole world (cigarettes, movies, travel, sex). This is Sensation as Consumption. It is a passive, \"Receptive\" state where one fills the inner void with external stimuli. It is the \"Having Mode\" disguised as enjoyment. The Sensation of Being is radically different. It is the non-greedy joy of the moment. It is looking at a flower without wanting to pick it; touching a hand without wanting to possess the person. It is a relationship of aliveness with the world, not a relationship of digestion.",
            'N': "Intuition is the faculty of Biophilia (Love of Life) when it envisions the growth of the living. It sees the potential in the acorn to become the oak. It is the basis of \"Humanistic Conscience\"—the voice that calls us to our own potential. However, Intuition can be Necrophilous if it falls in love with \"The Plan,\" \"The System,\" or \"The Ideal\" more than the people. When an intuitive becomes an ideologue, they will sacrifice living humans for the \"future utopia.\" Productive Intuition is always rooted in the reality of human needs, not the abstraction of dogma.",
            'T': "Fromm distinguishes Rationalization from Reason. Rationalization is the use of logic to justify our irrational passions (e.g., using logic to justify war or greed). This is the \"Intellect\" serving the \"Animal.\" Reason, however, is the \"Productive\" use of the mind to grasp the truth. It requires the courage to say \"No\" to power and illusion. The \"Hoarding\" thinker keeps their ideas like rare coins, separate from life. The \"Productive\" thinker's ideas are seeds—they are alive, they change the thinker, and they lead to action. Thought without action is, for Fromm, a form of sterility.",
            'F': "Fromm wrote \"The Art of Loving.\" He argued that Love (Feeling) is the only sane answer to the problem of human existence. But most \"Feeling\" is actually Symbiosis (I need you to survive) or Egoism à deux (two people against the world). Productive Feeling is Care (active concern for the other's growth), Responsibility (responding to their needs), Respect (seeing them as they are), and Knowledge (penetrating the surface). It is not a \"falling into\" (passive) but a \"standing in\" (active). It requires independence. You can only truly feel for another if you can stand on your own two feet.",
            'J': "The Authoritarian Character is the dark side of Judging. It is the person who admires strength and hates weakness. They want a world of strict Order because they cannot handle the responsibility of Freedom. They project their own chaos onto others and then try to \"control\" it. This is Necrophilia—the love of that which is not alive, that which is mechanical and predictable. The \"Productive\" Judge uses structure as a trellis for life to grow on, not a cage to keep life in. They have Rational Authority—authority based on competence and love, which dissolves as the other grows (like a good teacher).",
            'P': "The Marketing Character thrives on \"Perceiving\" because they must be eternally flexible. They have no \"principles\" or \"core\" that might make them obsolete in the market. They are \"open\" to everything because they stand for nothing. This is the Alienated state. However, in the Mode of Being, Perceiving is the state of Awakeness. It is the ability to break through the \"clichés\" and \"chatter\" of society to see the world freshly in every moment. It is the creativity of the child combined with the wisdom of the adult—a responsiveness that is not reactive, but genuinely alive."
        };

        const personalityDescriptions = {
            'ISTC(J)': "In Fromm's view, the ISTJ embodies the Hoarding Orientation. They find security in a world of constant change by building a wall of order, duty, and memory. They \"have\" their truth and they hold onto it. They are suspicious of the new because it threatens their accumulated stock of experience. While this makes them incredibly reliable, it stems from a fear of the unknown flow of life. Fromm would encourage the ISTJ to realize that true security comes not from fortifying the self against the world, but from the productive act of living—sharing their stability without demanding that the world stop changing.",
            'ISFC(J)': "The ISFJ represents a fusion of the Receptive and Hoarding orientations. They look for a source of \"good\" outside themselves—a family, a boss, a tradition—and then devote themselves to \"hoarding\" or preserving it. They find their identity in this symbiotic attachment, often sacrificing their own freedom to remain safe under the umbrella of authority. Fromm's \"fear of freedom\" is acute here; standing alone is terrifying. The path to the Productive Character is to recognize that they can be kind and helpful without surrendering their own sovereignty—to serve from a place of strength, not dependency.",
            'INFC(J)': "The INFJ is often a Productive Idealist trapped in a world of Marketing. They have a deep \"biophilia\" (love of life/growth) and a vision for what humanity could be. However, they can fall into a \"masochistic\" loyalty to this vision, sacrificing their actual life for the abstract ideal. They may also secretly desire a \"magic helper\" (Receptive) to save them from the harshness of reality. To be fully productive, the INFJ must engage with the world as it is, using their insight to effect concrete humanistic change rather than withdrawing into a fortress of superior moral intuition.",
            'INTC(J)': "The INTJ represents the Hoarding of Reason. They use their intellect to build a system of understanding that gives them control over reality. By \"owning\" the truth, they feel safe from the chaos of human emotion and social unpredictability. They value autonomy, which Fromm praises, but they often achieve it through isolation (withdrawal). The challenge for the INTJ is to move from \"having\" knowledge to \"being\" in the world—to use their systems not just to defend against the crowd, but to genuinely improve the human condition in a way that respects individual freedom.",
            'ISTM(P)': "The ISTP is the Productive Artisan, yet they operate with a Marketing coolness. They have a tangible relationship with reality (not hoarding illusions), which is healthy. However, they often treat themselves as a versatile instrument to be applied to whatever task arises, risking a sense of detachment. They may view the world as a series of problems to be fixed rather than a living whole to be experienced. Fromm would ask the ISTP to connect their mechanical mastery with a moral center—to not just ask \"does it work?\" but \"does it serve life?\"",
            'ISFM(P)': "The ISFP naturally leans toward the Productive orientation of Being. They value the experience of the moment over the accumulation of possessions or status (\"Having\"). They are often immune to the \"automaton conformity\" of society. However, their freedom can be passive. They may drift (Receptive), waiting for life to happen to them, rather than actively shaping it. Fromm's concept of \"productive love\" and \"productive work\" requires active participation. The ISFP must learn to impose their will gently on the world, creating and connecting, rather than just sensing and appreciating.",
            'INFM(P)': "The INFP feels the Alienation of the modern world deeply. They are the critics of the Marketing Orientation, refusing to sell their souls. However, their defense is often withdrawal. They retreat into an inner world of ideals, which can be a form of \"magic\" thinking—believing that their good intentions define them, regardless of their actions. Fromm would challenge the INFP to practice the \"art of loving\" in the real world. Values are only \"productive\" when they are lived out in the difficult, gritty arena of human relationships, not just cherished in private.",
            'INTM(P)': "The INTP is the Hoarder of Logic. They build elaborate intellectual castles to keep the irrational world at bay. They derive a sense of power from \"knowing,\" often without the need for \"doing.\" This detachment shields them from the anxiety of freedom and connection. Fromm would argue that reason is only one part of the human experience. To be whole, the INTP must integrate their intellect with \"productive love\"—the ability to care for and be responsible for others. They must risk the uncertainty of relationship to ensure their logic serves humanity, not just their own ego.",
            'ESTM(P)': "The ESTP often displays the Exploitative Orientation. They see the world as a collection of resources to be used, seized, or outsmarted. They are dynamic and active, but their activity can be predatory rather than productive. They may treat people as objects in their game. However, they are not \"hoarders\"; they are alive and vital. The shift to a Productive Character involves redirecting this vitality. Instead of \"taking\" from the world, the ESTP can \"give\" by using their resourcefulness to solve problems that benefit the community, moving from manipulation to genuine creation.",
            'ESFM(P)': "The ESFP is at risk of the Marketing Orientation. They are acutely aware of how they are perceived and are experts at adapting their personality to be \"attractive\" in the social marketplace. They fear that without this external validation, they cease to exist. They are the \"automaton\" of joy. Fromm's challenge to the ESFP is to find the self that exists when the audience leaves. True joy comes from \"productive activity\"—acting from one's center—rather than the frantic activity of keeping up appearances. They must learn to be, not just to appear.",
            'ENFM(P)': "The ENFP sells Inspiration. They are the \"marketers\" of the new. While they are often genuinely life-loving (biophilous), they can become \"alienated\" from themselves, jumping from role to role to avoid the stillness where the true self resides. They risk becoming a mirror of what others want them to be—the exciting catalyst. Fromm would urge the ENFP to stop \"selling\" their potential and start \"realizing\" it. This requires the discipline to stick with one thing and one person, moving from the surface level of infinite possibility to the deep level of concrete reality.",
            'ENTM(P)': "The ENTP combines Exploitative and Marketing traits in the intellectual sphere. They \"sell\" ideas and \"exploit\" logical loopholes. They love the game of debate, often valuing the victory over the truth. This can lead to a cynical detachment. To become Productive, the ENTP must align their brilliance with a humanistic conscience. They must stop viewing life as a puzzle to be hacked and start viewing it as a shared existence to be nurtured. They need to use their innovation to expand freedom for all, not just to prove their own superiority.",
            'ESTC(J)': "The ESTJ is the archetype of the Authoritarian Character. They escape the terrifying ambiguity of freedom by merging with the \"system.\" They dominate those below and submit to the rules above. They value \"Law and Order\" (dead structures) over the messy vitality of life. This is a \"necrophilous\" tendency—a love of control. Fromm's prescription is to embrace the uncertainty of freedom. The ESTJ must learn that true authority comes from within (rational authority), not from a title or a rulebook, and that order is meant to serve people, not the other way around.",
            'ESFC(J)': "The ESFJ is the Automaton Conformist. They find safety by erasing the boundary between themselves and the social group. They believe what \"one\" is supposed to believe; they feel what \"one\" is supposed to feel. This is a defense against the terror of isolation. While their care is often genuine, it lacks the \"freedom\" of a personal choice—it is a compulsion. The path to the Productive Character is individuation. The ESFJ must learn to stand alone and say \"I,\" so that when they say \"I love,\" it is a free gift, not a social tax.",
            'ENFC(J)': "The ENFJ exerts a Benevolent Authority. They want to guide others to their \"best selves,\" but this can mask a need to control the emotional environment. It is a subtle form of \"exploitation\"—using others as a canvas for their own ideals. They sell a vision of the future. Fromm would warn against the \"Great Inquisitor\" complex—taking away others' burden of freedom in the name of love. True \"productive love\" respects the other's separateness. The ENFJ must allow others to fail or disagree, accepting that they cannot (and should not) save everyone.",
            'ENTC(J)': "The ENTJ is the Exploitative Builder. They have a \"productive\" drive to create, but they often view humans as capital—means to an end. They are efficient, but efficiency can be the enemy of humanity. They risk becoming a \"robot\" of achievement, alienated from their own heart and the hearts of others. Fromm's humanism calls the ENTJ to recognize that man is an end in himself, not a tool. The ENTJ becomes truly great when their systems facilitate human freedom and well-being, rather than just maximizing output or power."
        };

        const questions = [
            { type: "S/N", text: "Are you:", options: ["Observant of your surroundings", "Introspective and thinking"] },
            { type: "E/I", text: "While waiting for the train, do you:", options: ["Chat with others", "Stay silent"] },
            { type: "T/F", text: "When dealing with people, are you:", options: ["Direct", "Gentle"] },
            { type: "J/P", text: "Does workplace clutter:", options: ["Stress you", "Leave you indifferent"] },
            { type: "T/F", text: "Which is easier for you to give?", options: ["Critical/Direct feedback", "Vague feedback (avoiding details)"] },
            { type: "S/N", text: "Do you:", options: ["Stick to the tried and trusted", "Speculate about possibilities"] },
            { type: "J/P", text: "Do you:", options: ["Decide instantaneously", "Linger over decision making"] },
            { type: "S/N", text: "Are you:", options: ["Factual", "Imaginative"] },
            { type: "E/I", text: "When the phone rings, do you:", options: ["Rush to answer it", "Let others answer"] },
            { type: "T/F", text: "Do you place importance on:", options: ["Hard data", "Opinion"] },
            { type: "J/P", text: "Do you prefer agreements to be:", options: ["Written up and signed", "Agreed on word and a handshake"] },
            { type: "T/F", text: "When evaluating others, are you:", options: ["Impersonal and objective", "Subjective and personal"] },
            { type: "S/N", text: "Are you more interested in:", options: ["What is real", "What is possible"] },
            { type: "J/P", text: "Are you more at ease:", options: ["When matters are complete", "With work in progress"] },
            { type: "S/N", text: "Are you always:", options: ["Up to date with the news", "Somewhat out of touch"] },
            { type: "E/I", text: "When socialising, do you:", options: ["Speak with many people", "Speak with a few friends"] },
            { type: "T/F", text: "When you are communicating with others, do you:", options: ["Talk directly", "Talk diplomatically"] },
            { type: "J/P", text: "Do you prefer:", options: ["A detailed outline of work done", "A list of completed tasks"] },
            { type: "T/F", text: "Do you prefer:", options: ["A rational, consistent approach", "A harmonious, personal approach"] },
            { type: "S/N", text: "Do you like authors who:", options: ["Write hard facts", "Use metaphors"] },
            { type: "J/P", text: "Are you more comfortable:", options: ["After a decision is made", "Before a decision is made"] },
            { type: "S/N", text: "Do you find visionaries:", options: ["Annoying", "Fascinating"] },
            { type: "E/I", text: "Does being at a party:", options: ["Energise you", "Drain you"] },
            { type: "T/F", text: "In an argument or discussion, do you:", options: ["Act confrontationally", "Seek collaborative solutions"] },
            { type: "J/P", text: "For you, is giving feedback:", options: ["Easy", "Difficult"] },
            { type: "T/F", text: "Which is preferable for you?", options: ["To be just", "To be understanding"] },
            { type: "S/N", text: "Is 'Common sense':", options: ["Usually reliable", "Occasionally questionable"] },
            { type: "J/P", text: "Do you:", options: ["Do one job at a time", "Work at many jobs simultaneously"] },
            { type: "S/N", text: "Do you:", options: ["Say what is on your mind", "Express many opinions"] },
            { type: "E/I", text: "In a group of people, do you:", options: ["Talk a lot", "Mostly listen"] },
            { type: "T/F", text: "Which sums you up best?", options: ["Cool-headed", "Warm-hearted"] },
            { type: "J/P", text: "Are you:", options: ["Organised", "Spontaneous"] },
            { type: "T/F", text: "In work situations, do you:", options: ["Give orders", "Get everyone to find solutions"] },
            { type: "S/N", text: "Do you prefer:", options: ["Sensible/Factual people", "People who explore options"] },
            { type: "J/P", text: "Do you prefer to:", options: ["Work to deadlines", "Work whenever"] },
            { type: "S/N", text: "Which ability do you consider best?", options: ["Ability to follow a plan", "Ability to adapt and adjust plans"] },
            { type: "E/I", text: "Are you:", options: ["A social person", "A private person"] },
            { type: "T/F", text: "Which are you?", options: ["A logical person", "A feeling person"] },
            { type: "J/P", text: "Do you decide:", options: ["Based on analysis", "On a considered hunch"] },
            { type: "T/F", text: "Which is most satisfying for you?", options: ["Thorough discussion", "Reaching agreement"] },
            { type: "S/N", text: "After a meal, do you:", options: ["Tidy up immediately", "Leave it until later"] },
            { type: "J/P", text: "Is your behaviour:", options: ["Hurried", "Laid back"] },
            { type: "S/N", text: "Do you hear what is said as:", options: ["The whole story", "Most of the story"] },
            { type: "E/I", text: "Do you:", options: ["Share your feelings easily", "Act reserved"] },
            { type: "T/F", text: "Are you:", options: ["An uncompromising person", "A collaborative person"] },
            { type: "J/P", text: "Do you find it:", options: ["Stressful to change plans", "Easy to reschedule meetings"] },
            { type: "T/F", text: "Are you:", options: ["Tough-minded", "Fair-minded"] },
            { type: "S/N", text: "When evaluating a situation, do you:", options: ["See only what is in front of you", "Imagine more possibilities"] },
            { type: "J/P", text: "Is your approach to:", options: ["Ensure everything is arranged", "Just let things happen"] },
            { type: "S/N", text: "Do you only trust:", options: ["Past experiences", "That all possibilities are worth checking"] },
            { type: "E/I", text: "Do you:", options: ["Know a little about everything", "Know much about a few things"] },
            { type: "T/F", text: "Are you convinced more often by:", options: ["Hard evidence", "Possible outside-the-box solutions"] },
            { type: "J/P", text: "Is your approach to life:", options: ["Structured", "Flexible"] },
            { type: "T/F", text: "Which is the greatest asset?", options: ["Strength of will", "Strength of fair compassion"] },
            { type: "S/N", text: "Do you always feel:", options: ["Down to earth", "Like you daydream a little"] },
            { type: "J/P", text: "How do you cope with unexpected events?", options: ["Get a good handle on things", "Get very stressed"] },
            { type: "S/N", text: "Do you act in a:", options: ["Routine way", "Whimsical way"] },
            { type: "E/I", text: "Are you:", options: ["A good conversationalist", "A good listener"] },
            { type: "T/F", text: "Are you:", options: ["Thick-skinned", "Sensitive"] },
            { type: "J/P", text: "Do you tend to:", options: ["Rely on old ways of doing", "Be on the lookout for new ways"] },
            { type: "T/F", text: "Do you prefer to:", options: ["Operate the production machine", "Manage the team of people"] },
            { type: "S/N", text: "Are you more:", options: ["Practical", "Ingenious"] },
            { type: "J/P", text: "Are you:", options: ["More punctual", "Leisurely/Nonchalant"] },
            { type: "S/N", text: "Do you approach work in:", options: ["An organised and principled way", "An innovative and flexible way"] },
            { type: "E/I", text: "Are you:", options: ["Social and outgoing", "Reserved and quiet"] },
            { type: "T/F", text: "Do you most trust:", options: ["Your experience", "Your hunches"] },
            { type: "J/P", text: "Are you:", options: ["Always on the go", "Relaxed, easy going"] },
            { type: "T/F", text: "Which is the greater error?", options: ["Being too passionate", "Being too objective"] },
            { type: "S/N", text: "Do you tend to be more:", options: ["Deliberate", "Spontaneous"] },
            { type: "J/P", text: "In evaluating others, what influences you most?", options: ["Laws", "Circumstances"] },
            { type: "S/N", text: "Which do you prefer in stories/film?", options: ["Action", "Fantasy"] },
            { type: "E/I", text: "In your sports club, do you:", options: ["Promote activities", "Do the administration"] },
            { type: "T/F", text: "Which is more difficult for you?", options: ["To identify with others", "To utilise others"] },
            { type: "J/P", text: "Are you:", options: ["A deadlines person", "A 'just whenever' person"] },
            { type: "T/F", text: "Which is most vital?", options: ["Following the to-do list", "Teamwork"] },
            { type: "S/N", text: "Are you:", options: ["Easy to talk to/approach", "Shy and reserved"] },
            { type: "J/P", text: "When do you plan your annual holidays?", options: ["Months before", "Weeks before"] },
            { type: "S/N", text: "Are you attracted to:", options: ["The fundamentals", "The promise"] },
            { type: "T/F", text: "For you, which is more important?", options: ["Following the rules", "Everyone taking full responsibility"] },
            { type: "J/P", text: "Do you use:", options: ["Written work schedules", "Your memory"] }
        ];

        const profileGridData = [
            { type: 'ISTC(J)', title: "The Hoarding Orientation", color: 'a' },
            { type: 'ISFC(J)', title: "The Receptive-Hoarder", color: 'b' },
            { type: 'INFC(J)', title: "Productive Idealist", color: 'a' },
            { type: 'INTC(J)', title: "Hoarding of Reason", color: 'b' },
            { type: 'ESTM(P)', title: "Exploitative Orientation", color: 'b' },
            { type: 'ESFM(P)', title: "The Marketing Orientation", color: 'a' },
            { type: 'ENFM(P)', title: "Marketing with Purpose", color: 'b' },
            { type: 'ENTM(P)', title: "Exploitative Intellectualism", color: 'a' },
            { type: 'ISTM(P)', title: "Productive Artisan", color: 'a' },
            { type: 'ISFM(P)', title: "The Art of Being", color: 'b' },
            { type: 'INFM(P)', title: "Humanistic Conscience", color: 'a' },
            { type: 'INTM(P)', title: "The Hoarder of Logic", color: 'b' },
            { type: 'ESTC(J)', title: "The Authoritarian Character", color: 'b' },
            { type: 'ESFC(J)', title: "The Automaton Conformist", color: 'a' },
            { type: 'ENFC(J)', title: "Benevolent Authority", color: 'b' },
            { type: 'ENTC(J)', title: "The Exploitative Builder", color: 'a' },
        ];

        const chartDescriptions = {
            'E': { question: "Where do I get my energy from? How do I relate to the outer world?", answer: "I mainly direct my energy towards the outer world of people and things. I tend to act first and reflect later. Interaction stimulates me, and I often feel energized after being active and social." },
            'I': { question: "Where do I get my energy from? How do I relate to the outer world?", answer: "I mainly direct my energy towards the inner world of experiences and ideas. I tend to reflect first and act later. I value privacy and often need time alone to recharge after social interaction." },
            'S': { question: "How do I take in Information? Find out about things?", answer: "I focus on what is real and actual. I value practical application and trust information that I can confirm with my five senses. I pay attention to details and the present moment." },
            'N': { question: "How do I take in Information? Find out about things?", answer: "I focus on patterns and meanings. I value imagination and inspiration, trusting my intuition and hunches. I am often more interested in future possibilities and the 'big picture' than specific details." },
            'T': { question: "How do I make decisions?", answer: "I prefer to make decisions based on logic and objective analysis. I search for the truth and principles that apply in a given situation. I strive to be impartial and value consistency." },
            'F': { question: "How do I make decisions?", answer: "I prefer to make decisions based on values and subjective evaluation. I am concerned with harmony and how the decision will affect the people involved. I strive to be compassionate and empathetic." },
            'J': { question: "How do I organise my outer world?", answer: "I prefer a planned and organized approach to life. I like to have things settled and decided. I enjoy making lists, schedules, and bringing closure to tasks." },
            'P': { question: "How do I organise my outer world?", answer: "I prefer a flexible and spontaneous approach to life. I like to keep my options open and adapt to new information as it arises. I feel comfortable going with the flow." }
        };

        const wordMap = {
            'E': 'Extroverted', 'I': 'Introverted',
            'S': 'Sensate', 'N': 'iNtuitive',
            'T': 'Thinking', 'F': 'Feeling',
            'J': 'Considered', 'P': 'iMpromptu'
        };

        const rgbaColorMap = {
            'E': { bg: 'rgba(234, 228, 0, 0.9)', border: 'rgba(234, 228, 0, 1)' },
            'I': { bg: 'rgba(68, 179, 225, 0.9)', border: 'rgba(68, 179, 225, 1)' },
            'S': { bg: 'rgba(255, 153, 0, 0.9)', border: 'rgba(255, 153, 0, 1)' },
            'N': { bg: 'rgba(120, 33, 112, 0.9)', border: 'rgba(120, 33, 112, 1)' },
            'T': { bg: 'rgba(33, 92, 152, 0.9)', border: 'rgba(33, 92, 152, 1)' },
            'F': { bg: 'rgba(78, 167, 46, 0.9)', border: 'rgba(78, 167, 46, 1)' },
            'J': { bg: 'rgba(235, 21, 21, 0.9)', border: 'rgba(235, 21, 21, 1)' },
            'P': { bg: 'rgba(153, 102, 51, 0.9)', border: 'rgba(153, 102, 51, 1)' }
        };

        const formatLetter = (letter) => {
            if (letter === 'J') return 'C(J)';
            if (letter === 'P') return 'M(P)';
            return letter;
        };

        const formatTypeString = (type) => {
            return type
                .replace('J', 'C<span class="suffix">(J)</span>')
                .replace('P', 'M<span class="suffix">(P)</span>');
        };

        const formatTypeKey = (str) => {
            return str.replace('J', 'C(J)').replace('P', 'M(P)');
        };

        const App = () => {
            const [stage, setStage] = useState('cover');
            const [qIndex, setQIndex] = useState(0);
            const [answers, setAnswers] = useState(new Array(questions.length).fill(null));
            const [isAdvancing, setIsAdvancing] = useState(false);
            const [showConverse, setShowConverse] = useState(false);
            const [modalData, setModalData] = useState(null);

            // Results state
            const [finalData, setFinalData] = useState([]);
            const [otherLetters, setOtherLetters] = useState([]);
            const [typeString, setTypeString] = useState('');
            const [scoresState, setScoresState] = useState({});
            const [maxScoresState, setMaxScoresState] = useState({});

            const handleStart = () => {
                setStage('quiz');
            };

            const handleOptionClick = (val) => {
                if (isAdvancing) return;
                setIsAdvancing(true);
                const newAnswers = [...answers];
                newAnswers[qIndex] = val;
                setAnswers(newAnswers);

                setTimeout(() => {
                    if (qIndex < questions.length - 1) {
                        setQIndex(qIndex + 1);
                    } else {
                        // If last question, just stay to allow finish
                    }
                    setIsAdvancing(false);
                }, 200);
            };

            const handlePrev = () => {
                if (qIndex > 0) setQIndex(qIndex - 1);
            };

            const handleFinish = () => {
                calculateResults(answers);
            };

            const calculateResults = (currentAnswers) => {
                const scores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
                currentAnswers.forEach(a => { if (a) scores[a]++; });
                scores.E *= 2; scores.I *= 2;
                
                const maxScores = { E: 22, I: 22, S: 23, N: 23, T: 23, F: 23, J: 23, P: 23 };
                const getPercent = (l) => (Math.min(scores[l], 20) / maxScores[l]) * 100;

                const fData = [];
                const oLetters = [];

                if (scores.E >= scores.I) { fData.push({ letter: 'E', score: getPercent('E') }); oLetters.push('I'); }
                else { fData.push({ letter: 'I', score: getPercent('I') }); oLetters.push('E'); }

                if (scores.S >= scores.N) { fData.push({ letter: 'S', score: getPercent('S') }); oLetters.push('N'); }
                else { fData.push({ letter: 'N', score: getPercent('N') }); oLetters.push('S'); }

                if (scores.T >= scores.F) { fData.push({ letter: 'T', score: getPercent('T') }); oLetters.push('F'); }
                else { fData.push({ letter: 'F', score: getPercent('F') }); oLetters.push('T'); }

                if (scores.J >= scores.P) { fData.push({ letter: 'J', score: getPercent('J') }); oLetters.push('P'); }
                else { fData.push({ letter: 'P', score: getPercent('P') }); oLetters.push('J'); }

                setFinalData(fData);
                setOtherLetters(oLetters);
                setTypeString(fData.map(d => d.letter).join(''));
                setScoresState(scores);
                setMaxScoresState(maxScores);
                setStage('results');
            };

            const renderCharts = () => {
                if (stage !== 'results') return;
                
                // Main Chart
                const svg = d3.select("#mainResultsChart");
                svg.html("");
                const margin = { top: 40, right: 20, bottom: 50, left: 40 };
                const width = 600 - margin.left - margin.right;
                const height = 400 - margin.top - margin.bottom;
                const g = svg.append("g").attr("transform", `translate(${margin.left},${margin.top})`);
                
                const x = d3.scaleBand().domain(finalData.map(d => d.letter)).range([0, width]).padding(0.4);
                const y = d3.scaleLinear().domain([0, 100]).range([height, 0]);
                const d3ColorMap = { 'E': '#eae400', 'I': '#44b3e1', 'S': '#ff9900', 'N': '#782170', 'T': '#215c98', 'F': '#4ea72e', 'J': '#eb1515', 'P': '#996633' };

                g.append("g").attr("class", "grid").call(d3.axisLeft(y).tickSize(-width).tickFormat(() => "").tickValues([0, 100])).call(sel => sel.select(".domain").remove()).selectAll(".tick line").attr("stroke", "#ccc");
                
                g.append("g").attr("class", "axis").attr("transform", `translate(0,${height})`)
                 .call(d3.axisBottom(x).tickSize(0).tickPadding(10).tickFormat(d => d === 'J' ? 'C(J)' : d === 'P' ? 'M(P)' : d))
                 .call(sel => sel.select(".domain").remove())
                 .selectAll("text").attr("font-family", "Poppins").style("font-size", "28px").attr("font-weight", "600").attr("fill", "#2c3e50");

                const bars = g.selectAll(".bar-group").data(finalData).join("g").attr("transform", d => `translate(${x(d.letter)}, 0)`);
                
                bars.append("rect").attr("class", "chart-bar-rect").attr("x", 0).attr("y", d => y(d.score)).attr("width", x.bandwidth()).attr("height", d => height - y(d.score)).attr("fill", d => d3ColorMap[d.letter]).attr("rx", 5)
                    .on("click", (e, d) => showBubbleInfo(d.letter));

                const bubbles = bars.append("g").attr("class", "chart-bubble-group").attr("transform", d => `translate(${x.bandwidth() / 2}, ${y(d.score) - 25})`)
                    .on("click", (e, d) => showBubbleInfo(d.letter));
                
                bubbles.append("circle").attr("r", 15).attr("fill", "#fff").attr("stroke", d => d3ColorMap[d.letter]).attr("stroke-width", 2);
                bubbles.append("text").text("?").attr("text-anchor", "middle").attr("dominant-baseline", "central").attr("fill", "#555").style("font-family", "Poppins").style("font-size", "18px").style("font-weight", "700").style("pointer-events", "none");

                // Converse Chart
                if (!showConverse) return;
                const cvSvg = d3.select("#converseResultsChart");
                cvSvg.html("");
                const cvWidth = 960 - margin.left - margin.right;
                const cvHeight = 500 - margin.top - margin.bottom;
                const cvG = cvSvg.append("g").attr("transform", `translate(${margin.left},${margin.top})`);
                
                const getD3Percent = (l, opp) => {
                    const real = scoresState[l];
                    const max = maxScoresState[l];
                    const oppReal = scoresState[opp];
                    if (real > 20) return (20 / max) * 100;
                    if (oppReal > 20) return ((max - 20) / max) * 100;
                    return (real / max) * 100;
                };

                const cvData = [
                    { group: 'E / I', valueA: getD3Percent('E', 'I'), valueB: getD3Percent('I', 'E'), keyA: 'E', keyB: 'I' },
                    { group: 'S / N', valueA: getD3Percent('S', 'N'), valueB: getD3Percent('N', 'S'), keyA: 'S', keyB: 'N' },
                    { group: 'T / F', valueA: getD3Percent('T', 'F'), valueB: getD3Percent('F', 'T'), keyA: 'T', keyB: 'F' },
                    { group: 'C(J) / M(P)', valueA: getD3Percent('J', 'P'), valueB: getD3Percent('P', 'J'), keyA: 'J', keyB: 'P' }
                ];

                const x0 = d3.scaleBand().domain(cvData.map(d => d.group)).rangeRound([0, cvWidth]).padding(0.2);
                const x1 = d3.scaleBand().domain(['valueA', 'valueB']).rangeRound([0, x0.bandwidth()]).padding(0);
                const yCv = d3.scaleLinear().domain([0, 100]).nice().rangeRound([cvHeight, 0]);

                cvG.append("g").attr("class", "grid").call(d3.axisLeft(yCv).tickSize(-cvWidth).tickFormat(() => "").tickValues([0, 100]))
                   .call(sel => sel.select(".domain").remove()).call(sel => sel.selectAll(".tick line").attr("stroke", d => d === 100 ? '#2c3e50' : '#ccc'));
                
                cvG.append("line").attr("x1", x0(cvData[0].group) - 10).attr("y1", yCv(50)).attr("x2", x0(cvData[3].group) + x0.bandwidth() + 10).attr("y2", yCv(50)).attr("stroke", "#333").attr("stroke-width", 2).attr("stroke-dasharray", "6,4");

                cvG.append("g").attr("class", "axis").attr("transform", `translate(0,${cvHeight})`)
                   .call(d3.axisBottom(x0).tickSize(0).tickPadding(10)).call(sel => sel.select(".domain").remove())
                   .selectAll("text").attr("font-family", "Poppins").style("font-size", "28px").attr("font-weight", "600").attr("fill", "#2c3e50");

                const cvBars = cvG.selectAll("g.layer").data(cvData).join("g").attr("transform", d => `translate(${x0(d.group)},0)`)
                   .selectAll("rect").data(d => [{key:'valueA', val: d.valueA, l: d.keyA}, {key:'valueB', val: d.valueB, l: d.keyB}]).join("g");
                
                cvBars.append("rect").attr("class", "chart-bar-rect").attr("x", d => x1(d.key)).attr("width", x1.bandwidth()).attr("y", d => yCv(d.val)).attr("height", d => cvHeight - yCv(d.val)).attr("fill", d => d3ColorMap[d.l]).attr("rx", 5)
                    .on("click", (e, d) => showBubbleInfo(d.l));

                const cvBubbles = cvBars.append("g").attr("class", "chart-bubble-group").attr("transform", d => `translate(${x1(d.key) + x1.bandwidth()/2}, ${yCv(d.val) - 25})`)
                    .on("click", (e, d) => showBubbleInfo(d.l));
                
                cvBubbles.append("circle").attr("r", 15).attr("fill", "#fff").attr("stroke", d => d3ColorMap[d.l]).attr("stroke-width", 2);
                cvBubbles.append("text").text("?").attr("text-anchor", "middle").attr("dominant-baseline", "central").attr("fill", "#555").style("font-family", "Poppins").style("font-size", "18px").style("font-weight", "700").style("pointer-events", "none");
            };

            useEffect(() => { renderCharts(); }, [finalData, showConverse, stage]);

            const showBubbleInfo = (letter) => {
                const info = chartDescriptions[letter];
                let title = letter;
                if(letter === 'J') title = 'C<span class="suffix">(J)</span>';
                if(letter === 'P') title = 'M<span class="suffix">(P)</span>';
                setModalData({ title, subtitle: info.question, desc: info.answer });
            };

            const showProfileModal = (type, title) => {
                let displayType = type.replace('J', 'C<span class="suffix">(J)</span>').replace('P', 'M<span class="suffix">(P)</span>');
                // Use the raw key for lookup
                const desc = personalityDescriptions[type] || "Description unavailable.";
                setModalData({ title: displayType, subtitle: title, desc });
            };

            return (
                <div className="container">
                    {stage === 'cover' && (
                        <div id="coverPage">
                            <h1 id="coverTitle" className="cover-title">The <b>J16T</b> Questionnaire<br/>(Jung 16 Temperaments)</h1>
                            <p className="cover-copyright">exclusive to <b>ourfields.ie</b> programmes</p>
                            <p className="cover-description">This is a instrument that describes a person's personal style, their own unique way of viewing, responding and relating to the world around them.</p>
                            <p className="cover-description-sub">It can be used for:</p>
                            <div className="features-list">
                                 <div className="feature-item"><img src="conflict.png" alt="Icon" className="feature-icon" onError={(e) => e.target.src='https://placehold.co/100x100/6a11cb/ffffff?text=Icon'} /><div className="feature-text-content"><h4 className="feature-title">Improving Communications</h4><p className="feature-description">The test helps build self-esteem and manage conflict by focusing on the positive contributions of each personality type.</p></div></div>
                                 <div className="feature-item"><img src="podium.png" alt="Icon" className="feature-icon" onError={(e) => e.target.src='https://placehold.co/100x100/2575fc/ffffff?text=Icon'} /><div className="feature-text-content"><h4 className="feature-title">Develop Individual Success</h4><p className="feature-description">The test provides practical insight into what motivates and de-motivates an individual.</p></div></div>
                                 <div className="feature-item"><img src="self.png" alt="Icon" className="feature-icon" onError={(e) => e.target.src='https://placehold.co/100x100/6a11cb/ffffff?text=Icon'} /><div className="feature-text-content"><h4 className="feature-title">Better Self-Understanding</h4><p className="feature-description">The test helps individuals get to know themselves better, which is a source of great satisfaction.</p></div></div>
                                 <div className="feature-item"><img src="career.png" alt="Icon" className="feature-icon" onError={(e) => e.target.src='https://placehold.co/100x100/2575fc/ffffff?text=Icon'} /><div className="feature-text-content"><h4 className="feature-title">Career Guidance</h4><p className="feature-description">Self-awareness is the key to good career guidance, as personal style affects motivation.</p></div></div>
                            </div>
                            <button id="startBtn" onClick={handleStart}>Begin the Evaluation</button>
                            <p className="ourfields-copyright-bottom">ourfields.ie ©</p>
                        </div>
                    )}

                    {stage === 'quiz' && (
                        <div id="quizSection">
                            <h1>JUNG TYPOLOGY</h1>
                            <div id="questionnaire">
                                <div className={`question-container ${isAdvancing ? 'transitioning' : ''}`} id="q-container" style={{opacity: 1, transform: 'translateY(0)'}}>
                                    <div className="question-number">{qIndex + 1}</div>
                                    <div className="question-text">{questions[qIndex].text}</div>
                                    <div className="options-container">
                                        {questions[qIndex].options.map((opt, i) => {
                                            const val = questions[qIndex].type.split('/')[i];
                                            const isSelected = answers[qIndex] === val;
                                            return (
                                                <div key={i} className={`option ${isSelected ? 'selected' : ''}`} onClick={() => handleOptionClick(val)}>
                                                    <input type="radio" checked={isSelected} readOnly />
                                                    <label>{opt}</label>
                                                </div>
                                            );
                                        })}
                                    </div>
                                </div>
                            </div>
                            <div className="navigation">
                                <button id="prevBtn" disabled={qIndex === 0} onClick={handlePrev}>Previous</button>
                                {qIndex === questions.length - 1 && (
                                    <button id="finishBtn" disabled={answers.some(a => a === null)} onClick={handleFinish}>Finish</button>
                                )}
                            </div>
                            <footer className="page-footer"><b>ourfields.ie</b> J16T (Jung 16 Temperaments)</footer>
                        </div>
                    )}

                    {stage === 'results' && (
                        <div id="resultsPage">
                            <div id="print-page-1">
                                <h1>Your Results</h1>
                                <div className="chart-container">
                                    <svg id="mainResultsChart" viewBox="0 0 600 400"></svg>
                                </div>
                                <div className="personality-type-display" dangerouslySetInnerHTML={{__html: formatTypeString(typeString)}} />
                                <div className="result-section-static">
                                    <div className="personality-words-display" dangerouslySetInnerHTML={{__html: finalData.map(d => {
                                        const full = wordMap[d.letter];
                                        if(d.letter === 'J') return '<strong>C</strong>onsidered<span class="suffix">(judging)</span>';
                                        if(d.letter === 'P') return 'i<strong>M</strong>promptu<span class="suffix">(perceiving)</span>';
                                        return full.replace(d.letter, `<strong>${d.letter}</strong>`);
                                    }).join(' - ')}} />
                                    <p id="desc-overview" className="result-section-content">{personalityDescriptions[formatTypeKey(typeString)] || "Description not available."}</p>
                                </div>
                            </div>
                            
                            <div className="letter-definitions-grid" style={{display: finalData.length === 4 ? 'grid' : 'none'}}>
                                 {finalData.map((d, i) => (
                                     <details key={i} className="letter-card" style={{
                                         borderColor: rgbaColorMap[d.letter].border,
                                         backgroundColor: rgbaColorMap[d.letter].bg.replace(', 0.9)', ', 0.1)')
                                     }}>
                                         <summary className="letter-card-title" dangerouslySetInnerHTML={{__html: (wordMap[d.letter] + (d.letter==='J'?'<span class="suffix">(judging)</span>':d.letter==='P'?'<span class="suffix">(perceiving)</span>':''))}} />
                                         <p className="letter-card-desc">{letterDescriptions[d.letter]}</p>
                                     </details>
                                 ))}
                            </div>

                            <div className="results-details">
                                <div className="toggle-other-container">
                                    <button className="other-toggle-btn" onClick={() => setShowConverse(!showConverse)}>
                                        {showConverse ? 'Hide Converse Profile' : 'Show Converse Profile'}
                                    </button>
                                </div>
                                {showConverse && (
                                    <>
                                        <div className="chart-container" id="converse-chart-container">
                                            <svg id="converseResultsChart" viewBox="0 0 960 500"></svg>
                                        </div>
                                        <h3 className="opposite-type-header" dangerouslySetInnerHTML={{__html: `Your converse profile: ${formatTypeString(otherLetters.join(''))}`}} />
                                        <p className="result-section-content" style={{fontStyle: 'italic'}}>{personalityDescriptions[formatTypeKey(otherLetters.join(''))] || "Description not available."}</p>
                                        <div className="letter-definitions-grid" style={{display: 'grid'}}>
                                            {otherLetters.map((l, i) => (
                                                <details key={i} className="letter-card" style={{
                                                    borderColor: rgbaColorMap[l].border,
                                                    backgroundColor: rgbaColorMap[l].bg.replace(', 0.9)', ', 0.1)')
                                                }}>
                                                    <summary className="letter-card-title" dangerouslySetInnerHTML={{__html: (wordMap[l] + (l==='J'?'<span class="suffix">(judging)</span>':l==='P'?'<span class="suffix">(perceiving)</span>':''))}} />
                                                    <p className="letter-card-desc">{letterDescriptions[l]}</p>
                                                </details>
                                            ))}
                                        </div>
                                    </>
                                )}
                            </div>

                            <div className="results-details">
                                <div className="profile-grid-container">
                                    <h3 className="profile-grid-title">Discover Jung's 16 Profiles</h3>
                                    <div className="profile-grid">
                                        {profileGridData.map((p, i) => (
                                            <div key={i} className={`profile-cell ${p.color === 'a' ? 'cell-color-a' : 'cell-color-b'} ${p.type === formatTypeKey(typeString) ? 'highlight' : ''}`} onClick={() => showProfileModal(p.type, p.title)}>
                                                <div className="profile-cell-type" dangerouslySetInnerHTML={{__html: p.type.replace('C(J)', 'C<span class="suffix">(J)</span>').replace('M(P)', 'M<span class="suffix">(P)</span>')}} />
                                                <div className="profile-cell-title">{p.title}</div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>
                            
                            <div className="restart-button-container">
                                <button id="printBtn" onClick={() => {
                                    setShowConverse(true);
                                    setTimeout(() => window.print(), 300);
                                }}>Download / Print Results</button>
                            </div>
                            <footer className="page-footer"><b>ourfields.ie</b> J16T (Jung 16 Temperaments)</footer>
                        </div>
                    )}

                    {modalData && (
                        <div id="profileModal" className="modal-overlay" onClick={(e) => e.target === e.currentTarget && setModalData(null)}>
                            <div className="modal-content">
                                <button className="modal-close" onClick={() => setModalData(null)}>&times;</button>
                                <h4 className="modal-profile-title" dangerouslySetInnerHTML={{__html: modalData.title}} />
                                <p className="modal-profile-subtitle">{modalData.subtitle}</p>
                                <p className="modal-profile-description">{modalData.desc}</p>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const rootElement = document.getElementById('root');
        if (!rootElement) {
          throw new Error("Could not find root element to mount to");
        }

        const root = ReactDOM.createRoot(rootElement);
        root.render(
          <React.StrictMode>
            <App />
          </React.StrictMode>
        );
    </script>
</body>
</html>
